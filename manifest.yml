app:
  id: ari:cloud:ecosystem::app/d7ba4f66-4eb4-4f53-b7c7-32efe5852fdf
  runtime:
    name: nodejs22.x

modules:
  jira:globalPage:
    - key: outage-dashboard-global-page
      resource: custom-landing
      resolver:
        function: resolver
      layout: blank
      title: OutageDashboard
  webtrigger:
    - key: rovo-callback-trigger
      function: rovoCallbackFn
      description: Receives Rovo results via Jira Automation callback
  rovo:agent:
    - key: outage-rovo-agent
      name: Network Outage Agent
      description: "Helps explore network outages, compliance, and communications."
      prompt: >
        You are the Network Outage Agent for Jira. Your role is to help users explore network outages,
        ACMA classifications, regional/remote impacts, and compliance timelines.

        When the user asks a question, use the provided inputs and context. If an input is missing,
        ask a concise clarifying question. Prefer short, scannable answers with bullets.

        You can invoke the outage-search action to process a user's outage query.
      conversationStarters:
        - Search outages by location
        - Find compliance risks
        - Summarize open ACMA outages
      actions:
        - outage-search
  action:
    - key: outage-search
      name: Outage Search
      function: outageSearchFn
      actionVerb: TRIGGER
      description: >
        Parse and answer outage-related questions from the user.
      inputs:
        query:
          title: Query
          type: string
          required: true
          description: "The user's outage question or prompt."
  function:
    - key: resolver
      handler: resolver.handler
    - key: outageSearchFn
      handler: resolver.outageSearch
    - key: rovoCallbackFn
      handler: resolver.rovoCallback

resources:
  - key: custom-landing
    path: static/custom-landing

permissions:
  content:
    styles:
      - unsafe-inline
  external:
    fetch:
      backend:
        - https://automation.atlassian.com
        - https://api-private.atlassian.com
    images:
      - https://tile.openstreetmap.org
      - https://*.tile.openstreetmap.org
  scopes:
    - read:jira-work
    - read:jira-user
    - read:issue-details:jira
    - read:project:jira
    - read:issue:jira
    - storage:app
